<%- [@valves].flatten.compact.each do |valve| %>
  <%- valve.each_pair do |attrib, value| -%>
    <%- if attrib == valve.keys.first -%>
  <Valve <%= attrib %>=<%= "#{value}".encode(:xml => :attr) %><% if attrib == valve.keys.last %> /><% end %>
    <%- else -%>
         <%= attrib %>=<%= "#{value}".encode(:xml => :attr) %><% if attrib == valve.keys.last %> /><% end %>
    <%- end -%>
  <%- end -%>
<%- end -%>
